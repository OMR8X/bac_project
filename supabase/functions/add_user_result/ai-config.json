{
  "model": "gemini-2.5-flash",
  "contents": [
    {
      "parts": [
        {
          
          "text": "Compare each student answer to the correct answer and return a JSON array of results. Use the acceptance rules below exactly. Always return valid JSON matching the responseSchema.Acceptance rules:1) Accept paraphrases and equivalent statements as CORRECT if they preserve the same meaning. Use semantic similarity, not just token overlap.2) If answer is partially correct, mark is_correct=false and explain missing/wrong parts in notes (notes should be in arabic language).3) Provide a numeric similarity score (0-100). Use it to compute confidence.4) If confidence < 60, set notes to include details about 'why the low confidence' and why (ambiguity/short answer/mismatch).Pairs to evaluate: {{pairs}}"

        }
      ]
    }
  ],
  "config": {
    "responseMimeType": "application/json",
   "systemInstruction": "You are an automated grader. Follow the Acceptance rules. Prefer clarity and short notes. Output only JSON that validates against responseSchema.",
    "thinkingConfig": {
      "thinkingBudget": 0
    },
    "responseSchema": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "correct_answer": {
            "type": "string"
          },
          "user_answer": {
            "type": "string"
          },
          "is_correct": {
            "type": "boolean"
          },
          "confidence": {
            "type": "number"
          },
          "notes": {
            "type": "string"
          }
        },
        "propertyOrdering": [
          "id",
          "correct_answer",
          "user_answer",
          "is_correct",
          "confidence",
          "notes"
        ]
      }
    }
  }
}  
